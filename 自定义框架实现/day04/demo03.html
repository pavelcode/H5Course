<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>CSS框架--设置位置position</title>
		 <style type="text/css">
        *{
            margin:0px;
            padding:0px;
        }
        .father{
            background-color:green;
            width:200px;
            height:200px;
            padding:50px;
            margin-bottom:50px;
            margin-left:100px;
        }
        .children{
            height:150px;
            width:150px;
            background-color:red;
            line-height:150px;
            text-align:center;
        }
        
         #father{
            height:400px;
            width:500px;
            background:green;
            padding:40px;
            position: absolute;
        }
        #child{
            height:200px;
            width:200px;
            background:yellow;
            margin: 100px;
            position: absolute;
        }
        #grandson{
            height:50px;
            width:50px;
            background:red;
            margin: 30px;
            position: absolute;
        }
    </style>
	</head>
	<body>
		<!-- 如果父辈元素中没有采用定位的（position属性值为relative、absolute或者fixed），那么偏移量参考对象为窗口。-->
		<div class="father">
		    <div class="children"></div>
		</div>
		
		<!--如果父辈元素中有采用定位的，那么偏移量的参考对象为距离它最近的采用定位的元素.-->
		<div class="father" style="position:relative">
		    <div class="children"></div>
		</div>
		
		<p>移动</p>
        <button>使用offset改变物体的位置</button>
        
        
        
        <div id="father">
		    <div id="child">
		        <div id="grandson"></div>
		    </div>
		</div>



	</body>
</html>
<script src="../../jquery/jquery-3.1.0.js"></script>
<script src='../myframe.js'></script>
<script type="text/javascript">
//jQuery获得位置
//  $(document).ready(function(){
//      $(".children").each(function(){
//          var text;
//          text="left:"+$(this).position().left;
//          text+="top:"+$(this).position().top;
//          $(this).text(text);
//      })
//  });
//
//  $("#elem").offset().top
//  $("#elem").offset().left
////    相对父元素的位置坐标：
//  $("#elem").position().top
//  $("#elem").position().left


//Query设置位置    
//    offset() 方法返回或设置匹配元素相对于文档的偏移（位置）。
//    offset() 则是该元素距离文档顶部的的距离。这里一定要注意是文档的顶部的距离，而不是说浏览器顶部的距离。
//返回第一个匹配元素的偏移坐标。
//该方法返回的对象包含两个整型属性：top 和 left，以像素计。此方法只对可见元素有效。
//		var newPos=new Object();
//		newPos.left="0";
//		newPos.top="200";
//		
//		$(document).ready(function(){
//		    $("button").click(function(){
//		        $("p").offset(newPos);
//		    });
//		});   
		
//原始实现
    //      两种坐标：
//    当我们计算一个DOM元素位置也就是坐标的时候，会涉及到两种坐标系，文档坐标和视口坐标。
//    文档坐标：我们经常用到的document就是整个页面部分，而不仅仅是窗口可见部分，还包括因为窗口大小限制而出现滚动条的部分，它的左上角就是我们所谓相对于文档坐标的原点。
//    视口坐标：视口是显示文档内容的浏览器的一部分，它不包括浏览器外壳（菜单，工具栏，状态栏等），也就是当前窗口显示页面部分，不包括滚动条。
//
//    两个概念：绝对定位 相对定位


// 元素的相对位置：每个元素都有offsetTop和offsetLeft属性，
// 表示该元素的左上角与父容器（offsetParent对象）左上角的距离
//	function offset(id){
//	    //获取元素的坐标值
//	    function offsetLeft(dom){
//	        return dom.offsetLeft
//	    }
//	    function offsetTop(dom){
//	        return dom.offsetTop
//	    }
//	
//	    var dom = $$.$id(id);
//	    return {top:offsetTop(dom),left:offsetLeft(dom)}
//	}
//    元素的绝对位置：指该元素的左上角相对于整张网页左上角的坐标。这个绝对位置要通过计算才能得到。
//    首先，每个元素都有offsetTop和offsetLeft属性，表示该元素的左上角与父容器（offsetParent对象）左上角的距离。
//    所以，只需要将这两个值进行累加，就可以得到该元素的绝对坐标。

//实现原理
//在阅读javascript高级程序设计第三版DOM部分时，
//了解到要获取某个元素在页面上的偏移量，
//需要将这个元素的offsetLeft和offsetTop与其offsetParent的相同属性相加，一直循环直至根元素。
//所以，要得到元素到文档区域的坐标位置，
//只需通过while循环不断获取offsetParent的offsetLeft/offsetTop直到offsetParent = null为止。

//  function absoluteOffset(id){
//      function absolateLeft(id){
//          var dom = $$.$id(id)
//          var left = offset(id).left;
//          var parent = dom.offsetParent;
//          while (parent !== null){
//              left += parent.offsetLeft;
//              parent = parent.offsetParent;
//          }
//          return left;
//      }
//      function absolateTop(id){
//          var dom = $$.$id(id)
//          var top = offset(id).top;
//          var parent = dom.offsetParent;
//          while (parent !== null){
//              top += parent.offsetTop;
//              parent = parent.offsetParent;
//          }
//          return top;
//      }
//      return {top:absolateTop(id),left:absolateLeft(id)}
//  }
    
//  console.log('相对坐标');
//	console.log( offset('father'));
//	console.log( offset('child'));
//	console.log( offset('grandson'));
//	
//	console.log('绝对坐标');
//	console.log( absoluteOffset('father'));
//	console.log( absoluteOffset('child'));
//	console.log( absoluteOffset('grandson'));
	
//框架中使用
    console.log('相对坐标')
    console.log( $$.offset('father'))
    console.log( $$.offset('child'))
    console.log( $$.offset('grandson'))

    console.log('绝对坐标')
    console.log( $$.position('father'))
    console.log( $$.position('child'))
    console.log( $$.position('grandson'))

</script>